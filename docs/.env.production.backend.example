# ========================================
# MEDUSA BACKEND - PRODUCTION ENVIRONMENT
# ========================================
# Copy this file and fill in actual values for production deployment
# NEVER commit actual .env files to version control

# ========================================
# CRITICAL SECURITY SECRETS
# ========================================
# Generate using: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# MUST be different from development/staging values
# MUST be at least 64 characters long
# Rotate every 90 days

# JWT Secret for authentication token signing (REQUIRED)
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-production-jwt-secret-min-64-chars-REPLACE-THIS

# Cookie Secret for session cookie signing (REQUIRED)
# Generate: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
COOKIE_SECRET=your-production-cookie-secret-min-64-chars-REPLACE-THIS

# ========================================
# DATABASE CONFIGURATION
# ========================================
# PostgreSQL connection string for production
# Format: postgres://username:password@host:port/database
# Examples:
#   - Supabase: postgres://postgres.xxx:[PASSWORD]@aws-0-ap-southeast-2.pooler.supabase.com:6543/postgres
#   - Railway: postgres://postgres:password@containers-us-west-123.railway.app:5432/railway
#   - AWS RDS: postgres://username:password@your-db.region.rds.amazonaws.com:5432/medusa_prod
#   - Render: postgres://user:pass@dpg-xxx-a.oregon-postgres.render.com/dbname
DATABASE_URL=postgres://username:password@host:port/database_name

# Database name (optional, extracted from DATABASE_URL)
DB_NAME=medusa-4wd-tours-production

# ========================================
# CORS CONFIGURATION
# ========================================
# Production domains (comma-separated, no spaces)
# CRITICAL: Update with your actual production domains

# Storefront CORS - Your customer-facing store domain(s)
# Example: https://medusa-4wd-tours.com,https://www.medusa-4wd-tours.com
STORE_CORS=https://your-storefront-domain.com

# Admin CORS - Your admin dashboard domain(s)
# Example: https://admin.medusa-4wd-tours.com
ADMIN_CORS=https://your-admin-domain.com

# Auth CORS - Authentication endpoints (usually same as admin)
# Example: https://admin.medusa-4wd-tours.com
AUTH_CORS=https://your-admin-domain.com

# ========================================
# REDIS CONFIGURATION
# ========================================
# Redis connection URL for caching and sessions
# Format: redis://username:password@host:port
# Examples:
#   - Upstash: rediss://default:xxx@correct-bass-12345.upstash.io:6379
#   - Redis Cloud: redis://default:password@redis-12345.c123.us-east-1-2.ec2.cloud.redislabs.com:12345
#   - Railway: redis://default:password@containers-us-west-123.railway.app:6379
REDIS_URL=redis://default:password@host:port

# ========================================
# STRIPE PAYMENT CONFIGURATION
# ========================================
# CRITICAL: Use LIVE mode keys in production, NOT test mode
# Get from: https://dashboard.stripe.com/apikeys

# Stripe Secret API Key (LIVE mode - starts with sk_live_)
# NEVER use test keys (sk_test_) in production
STRIPE_API_KEY=sk_live_your_stripe_secret_key_here

# Stripe Publishable Key (LIVE mode - starts with pk_live_)
# This is also set in storefront .env but included here for reference
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key_here

# Stripe Webhook Secret (REQUIRED for production)
# Get from: https://dashboard.stripe.com/webhooks
# Create webhook endpoint: https://your-api-domain.com/hooks/payment/stripe_stripe
# Events to listen for:
#   - payment_intent.succeeded
#   - payment_intent.payment_failed
#   - payment_intent.amount_capturable_updated
#   - charge.succeeded
#   - customer.subscription.created
#   - customer.subscription.updated
#   - customer.subscription.deleted
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ========================================
# NODE ENVIRONMENT
# ========================================
# MUST be 'production' for production deployments
NODE_ENV=production

# ========================================
# MEDUSA ADMIN CREDENTIALS
# ========================================
# Optional: Create initial admin user on first deployment
# Remove after first successful deployment for security
# ADMIN_EMAIL=admin@your-domain.com
# ADMIN_PASSWORD=your-secure-admin-password

# ========================================
# FILE STORAGE (OPTIONAL)
# ========================================
# If using S3-compatible storage for product images/files

# AWS S3 Configuration
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-bucket-name

# ========================================
# EMAIL PROVIDER (OPTIONAL)
# ========================================
# If using SendGrid, Mailgun, or other email service

# SendGrid
# SENDGRID_API_KEY=SG.your_sendgrid_api_key
# SENDGRID_FROM_EMAIL=noreply@your-domain.com

# Mailgun
# MAILGUN_API_KEY=your_mailgun_api_key
# MAILGUN_DOMAIN=mg.your-domain.com

# ========================================
# ANALYTICS & MONITORING (OPTIONAL)
# ========================================

# Sentry Error Tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# DataDog Monitoring
# DD_API_KEY=your_datadog_api_key

# ========================================
# CUSTOM MODULES & FEATURES
# ========================================

# Blog Module (if enabled)
# BLOG_ENABLED=true

# Resource Booking Module (if enabled)
# BOOKING_ENABLED=true

# ========================================
# DEPLOYMENT PLATFORM SPECIFIC
# ========================================

# Vercel (if deploying backend to Vercel)
# VERCEL=1

# Railway (if deploying to Railway)
# RAILWAY_ENVIRONMENT=production

# Render (if deploying to Render)
# RENDER=true

# ========================================
# SECURITY CHECKLIST
# ========================================
# Before deploying to production:
# [ ] All secrets are unique and different from development
# [ ] JWT_SECRET and COOKIE_SECRET are at least 64 characters
# [ ] Using Stripe LIVE mode keys (sk_live_, pk_live_)
# [ ] Stripe webhook endpoint created and secret configured
# [ ] CORS domains updated to production domains (no localhost)
# [ ] Database URL points to production database
# [ ] Redis URL points to production Redis instance
# [ ] .env file is listed in .gitignore
# [ ] Secrets are stored in deployment platform's secret manager
# [ ] SSL/TLS certificates are configured for all domains
# [ ] Database backups are configured
# [ ] Monitoring and error tracking are set up

# ========================================
# SECRET ROTATION SCHEDULE
# ========================================
# JWT_SECRET: Rotate every 90 days
# COOKIE_SECRET: Rotate every 90 days
# STRIPE_API_KEY: Rotate annually or if compromised
# DATABASE_URL: Update password every 180 days
# REDIS_URL: Update password every 180 days

# ========================================
# SUPPORT & DOCUMENTATION
# ========================================
# Medusa Docs: https://docs.medusajs.com
# Deployment Guide: https://docs.medusajs.com/deployment
# Stripe Integration: https://docs.medusajs.com/resources/commerce-modules/payment/payment-provider/stripe
